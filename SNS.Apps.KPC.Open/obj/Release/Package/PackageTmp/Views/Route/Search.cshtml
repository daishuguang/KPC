@using SNS.Apps.KPC.Libs.Configurations;
@using SNS.Apps.KPC.Libs.Models;

@{
    ViewBag.Title = "快拼车";
    Layout = "~/Views/Shared/_LayoutList.cshtml";
}

@section head{
    @Styles.Render("~/Content/route/search")

    <style>
        html {
            width: 100%;
            height: 100%;
        }

        body {
            background-color: white;
        }

        ul#searchzone li {
            border: none;
            border-image: none;
        }

        .div_c1 {
            padding: 0px 10px;
            border: 1px solid #cacaca;
            border-top: none;
        }

        li select {
            border: none;
        }

        .showPortrait {
            width: 50px;
            height: 50px;
        }

        #address input[type="text"], #wrapper input[type="text"], #wrapper input[type="password"] {
            /*
            display: flex;
            line-height: 25px;
            -webkit-box-flex: 1;
            -moz-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            */
            border: none;
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            width: 100%;
            padding: 5px;
            box-shadow: none;
            -webkit-appearance: none;
        }

        input[type="button"], input[type="button"]:visited {
            /*
            background: -ms-linear-gradient(#0faf0f,#008001);
            background: -o-linear-gradient(#0faf0f,#008001);
            background: -moz-linear-gradient(#0faf0f,#008001);
            background: -webkit-gradient(linear, 0% 0, 0% 100%, from(#0faf0f), to(#008001));
                */
            background-color: #2f8d13;
            border: 1px solid #008001;
            box-shadow: rgba(255, 255, 255, 0.298039) 0px 1px 0px 0px inset, rgb(204, 204, 204) 1px 1px 4px 0px;
        }

            input[type="button"]:active {
                /*
                background: -ms-linear-gradient(#005801,#008001);
                background: -o-linear-gradient(#005801,#008001);
                background: -moz-linear-gradient(#005801,#008001);
                background: -webkit-gradient(linear, 0% 0, 0% 100%, from(#005801), to(#008001));
                    */
            }

        .arrow_right::after {
            content: ' ';
            position: absolute;
            width: 9px;
            height: 14px;
            top: 40%;
            right: 25px;
            background: url("/Content/images/arrow_right.png") -9px 0 no-repeat;
        }

        #fromcity_div:active, #tocity_div:active, #fromcity:active, #tocity:active {
            background-color: #eee;
        }

        label.selected {
            background-color: green;
            color: white;
        }
    </style>
}

@RenderPage("/Views/Shared/_Navbar.cshtml")

<div id="wrapper" style="min-height:300px">
    <div class="header" style="position:relative;">
        <span id="navbar" class="headermenu"></span>
        <div class="headertitle">搜索路线</div>
    </div>
    <form method="post" action="/route/searchresultpost">
        <input type="hidden" name="from_province" id="from_province" />
        <input type="hidden" name="from_district" id="from_district" />
        <input type="hidden" name="from_lng" id="from_lng" />
        <input type="hidden" name="from_lat" id="from_lat" />
        <input type="hidden" name="to_province" id="to_province" />
        <input type="hidden" name="to_district" id="to_district" />
        <input type="hidden" name="to_lng" id="to_lng" />
        <input type="hidden" name="to_lat" id="to_lat" />

        <ul id="searchzone">
            <li class="search" style="padding:0px;line-height:38px;border-bottom:none;">
                <div id="sxb" style="float: left; text-align: center; width: 49.6%; border-right: 1px solid #ccc;">同城</div>
                <div id="ct" class="active" style="float:left;text-align:center;width:50%;">长途</div>
                <input type="radio" id="radiosxb" name="ptype" value="sxb" style="display:none;" checked="checked" />
                <input type="radio" id="radioct" name="ptype" value="ct" style="display:none;" />
            </li>
            <li class="search">
                <div id="fromcity_div" class="div_c1 arrow_right" style="border-top:1px solid #cacaca;margin-top:10px;">
                    <span class="title">城市</span>
                    <input type="text" readonly name="from_city" id="fromcity" style="width:70%" placeholder="选择起点城市" />
                    <select style="display:none;">
                        <option>选择区/县</option>
                        <option>浦东新区</option>
                        <option>闵行区</option>
                        <option>普陀区</option>
                        <option>杨浦区</option>
                    </select>
                </div>
            </li>
            <li class="search">
                <div class="div_c1">
                    <span class="title">起点</span>
                    <input type="text" readonly="readonly" name="from_location" placeholder="请输入详细地址(选填)" style="width:70%" id="from_map" class="mapvalue" />
                    <span id="from" class="mappop" style="position: absolute; width:12%;top:0px;right:0px;"><img src="~/Content/images/kpc_map_pin_from.png" style="vertical-align:middle;line-height:30px;height:30px;" /></span>
                </div>
            </li>
            <li class="search" id="destination" style="display:none;">
                <div id="tocity_div" class="div_c1 arrow_right" style="border-top:1px solid #cacaca;margin-top:10px;">
                    <span class="title">城市</span>
                    <input type="text" style="width:70%" id="tocity" name="to_city" placeholder="选择终点城市" readonly="readonly" />
                    <select style="display:none;">
                        <option>选择区/县</option>
                        <option>浦东新区</option>
                        <option>闵行区</option>
                        <option>普陀区</option>
                        <option>杨浦区</option>
                    </select>
                </div>
            </li>
            <li class="search">
                <div class="div_c1">
                    <span class="title">终点</span>
                    <input type="text" readonly="readonly" name="to_location" placeholder="请输入详细地址(选填)" id="to_map" style="width:70%" class="mapvalue" />
                    <span id="to" class="mappop" style="position: absolute;width:12%;top:0px;right:0px;"><img src="~/Content/images/kpc_map_pin_to.png" style="vertical-align:middle;line-height:30px;height:30px;" /></span>
                </div>
            </li>
            <li class="search" id="tc">
                <div class="div_c1" style="border-top:1px solid #cacaca;margin-top:10px;">
                    <!--<span class="title">
                        类型
                    </span>-->
                    <table cellspacing="0" style="table-layout:fixed;display:inline-block;vertical-align:middle;" cellpadding="0">
                        <tr>
                            <td>
                                <label id="lbltongchengall" for="tongchengall" style="padding:5px 15px;display:inline;text-align:center;" class="selected">全部</label>
                            </td>
                            <td>
                                <label id="lblworkday" for="workday" style="padding: 5px 15px; display: inline; text-align: center; ">工作日</label>
                            </td>
                            <td>
                                <label id="lbltwoday" for="twoday" style="padding: 5px 15px; display: inline; text-align: center; ">周末</label>
                            </td>
                            <td>
                                <label id="lbltempday" for="tempday" style="padding: 5px 15px; display: inline; text-align: center; ">临时</label>
                            </td>
                        </tr>
                    </table>

                    <input type="radio" style="display:none;" name="daysection" checked="checked" id="tongchengall" value="@((int)SearchDateRange.EveryDay)" />
                    <input type="radio" style="display:none;" name="daysection" id="workday" value="@((int)SearchDateRange.Workday)" />
                    <input type="radio" style="display:none;" name="daysection" id="twoday" value="@((int)SearchDateRange.Weekend)" />
                    <input type="radio" style="display:none;" name="daysection" id="tempday" value="@((int)SearchDateRange.Temp)" />
                </div>
            </li>
            <li id="ct_date" class="search ct">
                <div class="div_c1">
                    <span class="title">
                        日期
                    </span>
                    <input type="text" value="@DateTime.Now.ToString("yyy-MM-dd")" readonly name="StartDate_Date" id="StartDate_Date" placeholder="请输入出发日期" style="width:70%;" />
                </div>
            </li>
            <li id="sxb_date" class="search">
                <div class="div_c1">
                    <span class="title">
                        时间
                    </span>
                    <table cellspacing="0" style="table-layout:fixed;display:inline-block;vertical-align:middle;" cellpadding="0">
                        <tr>
                            <td>
                                <label id="lbldateall" for="date_all" style="padding:5px 20px;display:inline;text-align:center;" class="selected">全部</label>
                            </td>
                            <td>
                                <label id="lbldateam" for="date_am" style="padding: 5px 20px; display: inline; text-align: center; ">上午</label>
                            </td>
                            <td>
                                <label id="lbldatepm" for="date_pm" style="padding: 5px 20px; display: inline; text-align: center; ">下午</label>
                            </td>
                        </tr>
                    </table>
                    <input type="radio" id="date_all" name="pdate" style="display:none;" value="@((int)SearchDateRange.EntireDay)" checked="checked" />
                    <input type="radio" id="date_am" name="pdate" style="display:none;" value="@((int)SearchDateRange.InMorning)" />
                    <input type="radio" id="date_pm" name="pdate" style="display:none;" value="@((int)SearchDateRange.InAfternoon)" />
                </div>
            </li>
            <li class="search">
                <div class="div_c1">
                    <span class="title">
                        身份
                    </span>
                    <table cellspacing="0" style="table-layout:fixed;display:inline-block;vertical-align:middle;" cellpadding="0">
                        <tr>
                            <td>
                                <label id="lblall" for="role_all" style="padding:5px 15px;display:inline;text-align:center;" class="selected">全部</label>
                            </td>
                            <td>
                                <label id="lblpassenger" for="role_passenger" style="padding: 5px 15px; display: inline; text-align: center; ">找乘客</label>
                            </td>
                            <td>
                                <label id="lbldriver" for="role_driver" style="padding: 5px 15px; display: inline; text-align: center; ">找车主</label>
                            </td>
                        </tr>
                    </table>
                    <input id="role_all" type="radio" name="userrole" style="display:none;" value="all" checked="checked" />
                    <input id="role_passenger" type="radio" name="userrole" style="display:none;" value="passenger" />
                    <input id="role_driver" type="radio" name="userrole" style="display:none;" value="driver" />
                </div>
            </li>
            <li style="text-align: center;border-bottom:none;margin-top: 10px;">
                <input id="btn_search" type="button" value="搜索路线" style="font-size:20px;border-radius:3px;  width: 100%; height: 50px;color: white; text-align: center;" />
            </li>
        </ul>
    </form>
    <div id="shade" style="text-align:center;display:none">
        <img src="~/Content/images/loading.gif" />正在加载中...
    </div><!-- /Shade -->
    @RenderPage("/Views/Shared/_Footer.cshtml")
</div>
@Scripts.Render("~/bundles/route/loadsearch")
<div id="address" style="min-height:300px" class="hideback">
    <div class="header">
        <span class="backbtn" id="backbtn">
            <!--<img src="/content/images/back.png" width="25" height="25" style="vertical-align:middle; " />-->
        </span>
    </div>
    <br />
    <span style="padding:0px 10px;" id="cityown"></span>
    <div style="padding:0px 10px;">
        <table width="100%" style="table-layout:fixed">
            <tr>
                <td width="80%">
                    <input type="text" style="border: 1px solid rgb(238,238,238); width: 100%; min-height: 1.4em; line-height: 1.4em;" placeholder="请输入详细地址" id="address_text" />
                </td>
                <td>
                    <span id="btn_address" style="border-radius:3px;padding: 0.4em 0.5em;text-align:center; background-color: #009900;color:white;">确定</span>
                </td>
            </tr>
        </table>
    </div>
    <ul id="suggest"></ul>
</div>

<div id="popupMap" style="display: none; width: 100%; height: 100%; border: none">
    <div class="header">
        <span class="backbtn" id="cancel">
            <!--<img src="/content/images/back.png" width="25" height="25" style="vertical-align:middle" />-->
        </span>
        <span id="ok" style="position: absolute; right: 0px;border-radius:3px;background-color:darkgreen; border: 1px solid #2f8d13; height: 35px; line-height: 35px; margin: 7px 10px; padding: 0 10px">确定</span>
    </div><!-- navbar -->
    <div id="div_location" style="position: absolute; top: 50px; padding: 0.7em 0em; width: 100%; background-color: black; opacity: 0.6; filter: alpha(opacity=60); text-align: center; color: white; left: 0; z-index: 10">请在地图上点选</div>
    <div id="mapdiv" style="position:absolute;width:100%;border:none;"></div>
</div><!-- /popMap -->
<!-- / Baidu Map -->
@*<script type="text/javascript" src="@(string.Format(ConfigStore.MapAPISettings.Baidu_Map_URI, ConfigStore.MapAPISettings.MapAPIKey))"></script>*@
<script src="/Scripts/view/baidu.js"></script>
@Scripts.Render("~/bundles/route/search")
@Scripts.Render("~/bundles/route/maplocation")

<script>
    /*
    window.onload = function () {
        document.getElementById("loadmap").src = "/bundles/route/maplocation?v=" + (new Date()).getMonth();
    };
    */
</script>
<script id="loadmap"></script>
<!-- / Baidu Map -->
@if (!string.IsNullOrEmpty(ViewBag.ErrorMsg))
{
    <script type="text/javascript">
        alert("@ViewBag.ErrorMsg");
    </script>
}